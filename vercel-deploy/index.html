<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé¨ Film & Movie Agent</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #1a1a1a, #2d2d2d); color: white; min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .hero { text-align: center; padding: 60px 20px; background: linear-gradient(135deg, #ff6b6b, #4ecdc4); border-radius: 20px; margin-bottom: 40px; }
        .hero h1 { font-size: 3rem; margin-bottom: 20px; }
        .hero p { font-size: 1.2rem; margin-bottom: 30px; opacity: 0.9; }
        .search-form { display: flex; max-width: 500px; margin: 0 auto 20px; gap: 10px; }
        .search-input { flex: 1; padding: 15px; border: none; border-radius: 25px; font-size: 16px; }
        .search-btn { padding: 15px 25px; border: none; border-radius: 25px; background: rgba(255,255,255,0.2); color: white; cursor: pointer; }
        .search-btn:hover { background: rgba(255,255,255,0.3); }
        .quick-search { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 20px; }
        .suggestion-btn { padding: 8px 16px; border: 1px solid rgba(255,255,255,0.3); border-radius: 20px; background: rgba(255,255,255,0.1); color: white; cursor: pointer; }
        .suggestion-btn:hover { background: rgba(255,255,255,0.2); }
        .error { background: rgba(255,59,59,0.1); border: 1px solid rgba(255,59,59,0.3); color: #ff6b6b; padding: 15px; border-radius: 10px; margin: 20px 0; text-align: center; display: none; }
        .results { margin: 40px 0; }
        .results h2 { font-size: 2rem; margin-bottom: 20px; text-align: center; }
        .movies-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .movie-card { background: rgba(255,255,255,0.1); border-radius: 15px; overflow: hidden; transition: transform 0.3s; cursor: pointer; }
        .movie-card:hover { transform: translateY(-5px); }
        .movie-poster { width: 100%; height: 400px; object-fit: cover; }
        .movie-info { padding: 15px; }
        .movie-info h3 { margin-bottom: 10px; }
        .movie-info p { color: #ccc; margin-bottom: 5px; }
        .loading { text-align: center; padding: 40px; display: none; }
        @media (max-width: 768px) { .hero h1 { font-size: 2rem; } .search-form { flex-direction: column; } .movies-grid { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); } }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1>üé¨ Film & Movie Agent</h1>
            <p>Discover your favorite films and shows</p>
            
            <form class="search-form" onsubmit="searchMovies(event)">
                <input type="text" id="searchInput" placeholder="Search movies, TV shows, actors..." class="search-input">
                <button type="submit" class="search-btn" id="searchBtn">üîç Search</button>
            </form>

            <div class="quick-search">
                <span style="color: rgba(255,255,255,0.8);">Try: </span>
                <button class="suggestion-btn" onclick="quickSearch('Batman')">Batman</button>
                <button class="suggestion-btn" onclick="quickSearch('Marvel')">Marvel</button>
                <button class="suggestion-btn" onclick="quickSearch('Horror')">Horror</button>
                <button class="suggestion-btn" onclick="quickSearch('Comedy')">Comedy</button>
            </div>
        </div>

        <div id="error" class="error"></div>
        <div id="loading" class="loading">üé¨ Searching movies...</div>

        <div id="searchResults" class="results" style="display: none;">
            <h2 id="resultsTitle">Search Results</h2>
            <div id="moviesGrid" class="movies-grid"></div>
        </div>

        <div id="popularSection" class="results">
            <h2>Popular Movies & Shows</h2>
            <div id="popularGrid" class="movies-grid"></div>
        </div>
    </div>

    <script>
        let isLoading = false;

        // Load popular movies on page load
        document.addEventListener('DOMContentLoaded', fetchPopularMovies);

        async function fetchPopularMovies() {
            try {
                // Mock popular movies for demo
                const mockMovies = [
                    { title: "Avengers: Endgame", year: "2019", plot: "The Avengers assemble once more to reverse the damage caused by Thanos.", poster: "https://images.unsplash.com/photo-1594909122845-11baa439b7bf?w=300&h=450&fit=crop", rating: "8.4" },
                    { title: "Spider-Man: No Way Home", year: "2021", plot: "Peter Parker's secret identity is revealed to the entire world.", poster: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=450&fit=crop", rating: "8.2" },
                    { title: "The Batman", year: "2022", plot: "Batman ventures into Gotham City's underworld when a sadistic killer leaves behind a trail of cryptic messages.", poster: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=300&h=450&fit=crop", rating: "7.8" },
                    { title: "Top Gun: Maverick", year: "2022", plot: "After thirty years, Maverick is still pushing the envelope as a top naval aviator.", poster: "https://images.unsplash.com/photo-1440404653325-ab127d49abc1?w=300&h=450&fit=crop", rating: "8.3" },
                    { title: "Black Panther", year: "2018", plot: "T'Challa, heir to the hidden but advanced kingdom of Wakanda, must step forward to lead his people.", poster: "https://images.unsplash.com/photo-1594909122845-11baa439b7bf?w=300&h=450&fit=crop", rating: "7.3" },
                    { title: "Dune", year: "2021", plot: "Paul Atreides leads nomadic tribes in a battle to control the desert planet Arrakis.", poster: "https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=300&h=450&fit=crop", rating: "8.0" }
                ];
                displayMovies(mockMovies, 'popularGrid');
            } catch (error) {
                console.error('Error loading popular movies:', error);
            }
        }

        async function searchMovies(event) {
            event.preventDefault();
            const query = document.getElementById('searchInput').value.trim();
            if (!query || isLoading) return;

            performSearch(query);
        }

        function quickSearch(query) {
            document.getElementById('searchInput').value = query;
            performSearch(query);
        }

        async function performSearch(query) {
            if (isLoading) return;
            
            setLoading(true);
            hideError();
            hideResults();

            try {
                // Try real API first, fallback to mock data
                let movies = [];
                
                try {
                    const response = await fetch(`https://api.themoviedb.org/3/search/multi?api_key=177b48eb85143a28a9aac14ec0e5a679&query=${encodeURIComponent(query)}`);
                    const data = await response.json();
                    
                    movies = data.results?.slice(0, 12).map(item => ({
                        title: item.title || item.name || 'Unknown',
                        year: (item.release_date || item.first_air_date || '').slice(0, 4) || 'Unknown',
                        plot: item.overview || 'No plot available',
                        poster: item.poster_path ? `https://image.tmdb.org/t/p/w500${item.poster_path}` : 'https://images.unsplash.com/photo-1440404653325-ab127d49abc1?w=300&h=450&fit=crop',
                        rating: item.vote_average ? item.vote_average.toFixed(1) : 'N/A'
                    })) || [];
                } catch (apiError) {
                    console.warn('API failed, using mock data:', apiError);
                    // Mock search results
                    movies = [
                        { title: `${query} Movie 1`, year: "2023", plot: `A great movie about ${query}. This is an exciting story with amazing characters.`, poster: "https://images.unsplash.com/photo-1594909122845-11baa439b7bf?w=300&h=450&fit=crop", rating: "8.5" },
                        { title: `${query} Movie 2`, year: "2022", plot: `Another excellent ${query} film with stunning visuals and compelling storyline.`, poster: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=450&fit=crop", rating: "7.9" },
                        { title: `${query} Series`, year: "2021", plot: `A popular TV series featuring ${query} with multiple seasons of entertainment.`, poster: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=300&h=450&fit=crop", rating: "8.2" }
                    ];
                }

                if (movies.length === 0) {
                    showError(`No results found for "${query}". Try a different search term.`);
                } else {
                    showResults(movies, `Search Results for "${query}" (${movies.length})`);
                }
            } catch (error) {
                console.error('Search error:', error);
                showError('Search failed. Please check your internet connection and try again.');
            } finally {
                setLoading(false);
            }
        }

        function displayMovies(movies, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            movies.forEach(movie => {
                const card = document.createElement('div');
                card.className = 'movie-card';
                card.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}" class="movie-poster" onerror="this.src='https://images.unsplash.com/photo-1440404653325-ab127d49abc1?w=300&h=450&fit=crop'">
                    <div class="movie-info">
                        <h3>${movie.title}</h3>
                        <p>${movie.year} ‚Ä¢ ‚≠ê ${movie.rating}</p>
                        <p style="font-size: 0.9rem; line-height: 1.4;">${movie.plot}</p>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function setLoading(loading) {
            isLoading = loading;
            const btn = document.getElementById('searchBtn');
            const loadingDiv = document.getElementById('loading');
            
            if (loading) {
                btn.textContent = '‚è≥ Searching...';
                btn.disabled = true;
                loadingDiv.style.display = 'block';
            } else {
                btn.textContent = 'üîç Search';
                btn.disabled = false;
                loadingDiv.style.display = 'none';
            }
        }

        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            document.getElementById('popularSection').style.display = 'none';
            document.getElementById('searchResults').style.display = 'none';
        }

        function hideError() {
            document.getElementById('error').style.display = 'none';
        }

        function showResults(movies, title) {
            document.getElementById('resultsTitle').textContent = title;
            displayMovies(movies, 'moviesGrid');
            document.getElementById('searchResults').style.display = 'block';
            document.getElementById('popularSection').style.display = 'none';
        }

        function hideResults() {
            document.getElementById('searchResults').style.display = 'none';
            document.getElementById('popularSection').style.display = 'block';
        }
    </script>
</body>
</html>